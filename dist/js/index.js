/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={952:(t,e,a)=>{"use strict";e.c4=e.De=void 0;const r=a(813),n=a(21),i=a(948),s=a(447),o=a(228);var c=a(216);Object.defineProperty(e,"De",{enumerable:!0,get:function(){return c.Config}});a(21),a(280),a(844);e.c4=class{loaded=!1;data={};config;constructor(t){this.config=t}processDataPath(t){if(void 0===t||!t.trim())throw new n.DataError("The Data Path can't be empty",6);if(t==this.config.separator)return[];const e=(t=(0,r.removeTrailingChar)(t,this.config.separator)).split(this.config.separator);return e.shift(),e}async retrieveData(t,e=!1){await this.load();const a=this,r=(i,o)=>{let c=t[o];function h(r=!1){if(i.hasOwnProperty(c))i=i[c];else{if(!e)throw new n.DataError(`Can't find dataPath: ${a.config.separator}${t.join(a.config.separator)}. Stopped at ${c}`,5);i[c]=r?[]:{},i=i[c]}}const d=s.ArrayInfo.processArray(c);if(d){if(c=d.property,h(!0),!Array.isArray(i))throw new n.DataError(`DataPath: ${a.config.separator}${t.join(a.config.separator)}. ${c} is not an array.`,11);const r=d.getIndex(i,!0);if(!d.append&&i.hasOwnProperty(r))i=d.getData(i);else{if(!e)throw new n.DataError(`DataPath: ${a.config.separator}${t.join(a.config.separator)}. . Can't find index ${d.index} in array ${c}`,10);d.append?(i.push({}),i=i[i.length-1]):(i[r]={},i=i[r])}}else h();return t.length==++o?i:r(i,o)};return 0===t.length?this.data:r(this.data,0)}async getParentData(t,e){const a=this.processDataPath(t),r=a.pop();return new i.DBParentData(await this.retrieveData(a,e),this,t,r)}getData(t){return(0,o.readLockAsync)((async()=>{const e=this.processDataPath(t);return this.retrieveData(e,!1)}))}getObject(t){return this.getData(t)}async getObjectDefault(t,e){try{return await this.getData(t)}catch(t){if(!(t instanceof n.DataError))throw t;if(5!=t.id)throw t;return e}}async exists(t){try{return await this.getData(t),!0}catch(t){if(t instanceof n.DataError)return!1;throw t}}async count(t){const e=await this.getData(t);if(!Array.isArray(e))throw new n.DataError(`DataPath: ${t} is not an array.`,11);const a=this.processDataPath(t);return(await this.retrieveData(a,!1)).length}async getIndex(t,e,a="id"){return(await this.getArrayData(t)).map((function(t){return t[a]})).indexOf(e)}async getIndexValue(t,e){return(await this.getArrayData(t)).indexOf(e)}async getArrayData(t){const e=await this.getData(t);if(!Array.isArray(e))throw new n.DataError(`DataPath: ${t} is not an array.`,11);const a=this.processDataPath(t);return this.retrieveData(a,!1)}async filter(t,e){const a=await this.getData(t);if(Array.isArray(a))return a.filter(e);if(a instanceof Object){const t=Object.entries(a).filter((t=>e(t[1],t[0])));if(!t||t.length<1)return;return t.map((t=>t[1]))}throw new n.DataError("The entry at the path ("+t+") needs to be either an Object or an Array",12)}async find(t,e){const a=await this.getData(t);if(Array.isArray(a))return a.find(e);if(a instanceof Object){const t=Object.entries(a).find((t=>e(t[1],t[0])));if(!t||t.length<2)return;return t[1]}throw new n.DataError("The entry at the path ("+t+") needs to be either an Object or an Array",12)}async push(t,e,a=!0){return(0,o.writeLockAsync)((async()=>{const i=await this.getParentData(t,!0);let s=e;if(!a)if(Array.isArray(e)){let t=i.getData();if(void 0===t)t=[];else if(!Array.isArray(t))throw new n.DataError("Can't merge another type of data with an Array",3);s=t.concat(e)}else if(e===Object(e)){if(Array.isArray(i.getData()))throw new n.DataError("Can't merge an Array with an Object",4);s=(0,r.merge)(i.getData(),e)}i.setData(s),this.config.saveOnPush&&await this.save()}))}async delete(t){await(0,o.writeLockAsync)((async()=>{(await this.getParentData(t,!0)).delete(),this.config.saveOnPush&&await this.save()}))}resetData(t){this.data=t}async reload(){this.loaded=!1,await this.load()}async load(){if(!this.loaded)try{this.data=await this.config.adapter.readAsync(),this.loaded=!0}catch(t){throw new n.DatabaseError("Can't Load Database",1,t)}}async save(t){if(!(t=t||!1)&&!this.loaded)throw new n.DatabaseError("DataBase not loaded. Can't write",7);try{await this.config.adapter.writeAsync(this.data)}catch(t){throw new n.DatabaseError("Can't save the database",2,t)}}}},280:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JsonAdapter=void 0,e.JsonAdapter=class{adapter;humanReadable;dateRegex=new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}","m");constructor(t,e=!1){this.adapter=t,this.humanReadable=e}replacer(t,e){return e}reviver(t,e){return"string"==typeof e&&null!=this.dateRegex.exec(e)?new Date(e):e}async readAsync(){const t=await this.adapter.readAsync();return null==t?(await this.writeAsync({}),{}):JSON.parse(t,this.reviver.bind(this))}writeAsync(t){let e="";return e=this.humanReadable?JSON.stringify(t,this.replacer.bind(this),4):JSON.stringify(t,this.replacer.bind(this)),this.adapter.writeAsync(e)}}},844:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileAdapter=void 0;const r=a(270),n=a(114);e.FileAdapter=class{filename;fsync;constructor(t,e){this.filename=t,this.fsync=e}async readAsync(){try{return await(0,r.readFile)(this.filename,{encoding:"utf-8"})}catch(t){if("ENOENT"===t.code)return null;throw t}}async writeAsync(t){let e=null;try{e=await(0,r.open)(this.filename,"w")}catch(t){if("ENOENT"!==t.code)throw t;const a=n.dirname(this.filename);await(0,r.mkdir)(a,{recursive:!0}),e=await(0,r.open)(this.filename,"w")}try{await e.writeFile(t,{encoding:"utf-8"}),this.fsync&&await e.sync()}finally{await e.close()}}}},447:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getArrayIndicies=e.validateArrayIndex=e.validateArrayIndicies=e.isInt=e.ArrayInfo=e.arrayRegex=void 0;const r=a(21);e.arrayRegex=()=>/^([\.0-9a-zA-Z_$\-][0-9a-zA-Z_\-$\.]*)\[((?!(\]|\[)).*|)\]$/gm;const n={};class i{property;index=0;append=!1;indicies=[];constructor(t,e){this.property=t;const a=e[0]??0;if(this.append=""===a||""===e[e.length-1],this.indicies=e,s(a))this.index=parseInt(a);else if(!this.append)throw new r.DataError("Only numerical values accepted for array index",200)}static processArray(t){if(void 0===t)return null;if(n[t])return n[t];const a=(0,e.arrayRegex)().exec(t.trim());if(null!=a){const e=a[1],r=h("["+a[2].toString()+"]");return o(r),n[t]=new i(e,r)}return null}getIndex(t,e){if(this.append)return-1;const a=this.index;if(-1==a){const a=e?t:t[this.property];return 0===a.length?0:a.length-1}return a}getData(t){if(this.append)throw new r.DataError("Can't get data when appending",100);const{index:e,dataForProperty:a}=this.getArrayDataAndIndexFromProperty(t);return a[e]}setData(t,e){if(this.append){let a=t[this.property];this.indicies.forEach((t=>{""!==t&&(-1==(t=+t)&&(t=a.length-1),a=a[+t])})),a.push(e)}else{const{index:a,dataForProperty:r}=this.getArrayDataAndIndexFromProperty(t);-1===a?r.push(e):r[a]=e}}delete(t){if(this.append)throw new r.DataError("Can't delete an appended data",10);const{index:e,dataForProperty:a}=this.getArrayDataAndIndexFromProperty(t);a.splice(e,1)}isValid(t){const{index:e,dataForProperty:a}=this.getArrayDataAndIndexFromProperty(t);return a.hasOwnProperty(e)}getArrayDataAndIndexFromProperty(t){let e=0,a=t instanceof Array?t:t[this.property]??t;if(this.indicies.length>0){e=+this.indicies[this.indicies.length-1];for(let t=0;t<this.indicies.length-1;t++){let e=+this.indicies[t];-1===e&&(e=a.length-1),a=a[e]}-1===e&&(e=a.length-1)}return{index:e,dataForProperty:a}}isMultiDimensional(){return this.indicies.length>1}}function s(t){return!isNaN(t)&&Number(t)==t&&!isNaN(parseInt(t,10))}function o(t){const e=t.filter((t=>""===t));if(e.length>1)throw Error("Only one append index is supported for nested arrays");if(1===e.length&&""!==t[t.length-1])throw Error("Append index must be at the end of the nested array")}function c(t){if(0!==t.length&&!s(t))throw new r.DataError("Only numerical values accepted for array index",200)}function h(t){if(0===t.length)return[];if("["!==t.charAt(0))throw new Error("Invalid array syntax detected");const e=t.substring(1,t.indexOf("]"));c(e);const a=e.length+2;return[e,...h(t.substring(a))]}e.ArrayInfo=i,e.isInt=s,e.validateArrayIndicies=o,e.validateArrayIndex=c,e.getArrayIndicies=h},948:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DBParentData=void 0;const r=a(447),n=a(21);e.DBParentData=class{parent;data;db;dataPath;constructor(t,e,a,r){this.parent=r,this.data=t,this.db=e,this.dataPath=a}checkArray(t=!1){const e=r.ArrayInfo.processArray(this.parent);if(e&&(!e.append||t)&&!e.isValid(this.data))throw new n.DataError("DataPath: /"+this.dataPath+". Can't find index "+e.index+" in array "+e.property,10);return e}getData(){if(void 0===this.parent)return this.data;const t=this.checkArray();return t?t.getData(this.data):this.data[this.parent]}setData(t){if(void 0===this.parent)return void this.db.resetData(t);const e=r.ArrayInfo.processArray(this.parent);if(e){if(this.data.hasOwnProperty(e.property)){if(!Array.isArray(this.data[e.property]))throw new n.DataError("DataPath: /"+this.dataPath+". "+e.property+" is not an array.",11)}else this.data[e.property]=[];e.setData(this.data,t)}else this.data[this.parent]=t}delete(){if(void 0===this.parent)return void this.db.resetData({});const t=this.checkArray(!0);t?t.delete(this.data):delete this.data[this.parent]}}},21:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataError=e.DatabaseError=e.NestedError=void 0;class a extends Error{inner;id;constructor(t,e,a){super(t),this.inner=a,this.id=e,this.name=this.constructor.name}toString(){const t=this.name+": "+this.message;return this.inner?t+":\n"+this.inner:t}}e.NestedError=a,e.DatabaseError=class extends a{},e.DataError=class extends a{}},216:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigWithAdapter=e.Config=void 0;const r=a(251),n=a(280),i=a(844);e.Config=class{adapter;filename;saveOnPush;separator;constructor(t,e=!0,a=!1,s="/",o=!1){this.filename=t,""===r.extname(t)&&(this.filename+=".json"),this.saveOnPush=e,this.separator=s,this.adapter=new n.JsonAdapter(new i.FileAdapter(this.filename,o),a)}},e.ConfigWithAdapter=class{adapter;saveOnPush;separator;constructor(t,e=!0,a="/"){this.adapter=t,this.saveOnPush=e,this.separator=a}}},813:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeTrailingChar=e.merge=void 0,e.merge=(...t)=>{const a={};return t.forEach((function(t){var r;for(r in t)r in a&&null===a[r]?a[r]=t[r]:r in a&&Array.isArray(a[r])?a[r]=a[r].concat(t[r]):r in a&&"object"==typeof a[r]?a[r]=(0,e.merge)(a[r],t[r]):a[r]=t[r]})),a},e.removeTrailingChar=(t,e)=>t.length>1&&t.endsWith(e)?t.substring(0,t.length-1):t},515:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeoutError=void 0;const r=a(21);class n extends r.NestedError{}e.TimeoutError=n},228:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.writeLockAsync=e.readLockAsync=void 0;const r=a(595),n=a(515),i=new r;e.readLockAsync=(t,e=null)=>{let a={};return null!=e&&(a={timeout:e}),new Promise(((e,r)=>{i.readLock((async a=>{try{const a=await t();e(a)}catch(t){r(t)}finally{a()}}),{...a,timeoutCallback(){r(new n.TimeoutError("Timeout",100))}})}))},e.writeLockAsync=(t,e=null)=>{let a={};return null!=e&&(a={timeout:e}),new Promise(((e,r)=>{i.writeLock((async a=>{try{const a=await t();e(a)}catch(t){r(t)}finally{a()}}),{...a,timeoutCallback(){r(new n.TimeoutError("Timeout",100))}})}))}},595:t=>{t.exports=function(){"use strict";function t(){this.readers=0,this.queue=[]}function e(e,a,i){var s;"function"!=typeof e?(n.hasOwnProperty(e)||(n[e]=new t),s=n[e]):(i=a,a=e,s=r),i||(i={});var o=null;i.hasOwnProperty("scope")&&(o=i.scope);var c=function(){var t=!1;return function(){t||(t=!0,s.readers--,s.queue.length&&s.queue[0]())}}();if(s.readers<0||s.queue.length){var h=!1;if(s.queue.push((function(){!h&&s.readers>=0&&(h=!0,s.queue.shift(),s.readers++,a.call(o,c),s.queue.length&&s.queue[0]())})),i.hasOwnProperty("timeout")){var d=null;i.hasOwnProperty("timeoutCallback")&&(d=i.timeoutCallback),setTimeout((function(){h||(h=!0,s.queue.shift(),d&&d.call(i.scope))}),i.timeout)}}else s.readers++,a.call(i.scope,c)}function a(e,a,i){var s;"function"!=typeof e?(n.hasOwnProperty(e)||(n[e]=new t),s=n[e]):(i=a,a=e,s=r),i||(i={});var o=null;i.hasOwnProperty("scope")&&(o=i.scope);var c=function(){var t=!1;return function(){t||(t=!0,s.readers=0,s.queue.length&&s.queue[0]())}}();if(s.readers||s.queue.length){var h=!1;if(s.queue.push((function(){h||s.readers||(h=!0,s.queue.shift(),s.readers=-1,a.call(i.scope,c))})),i.hasOwnProperty("timeout")){var d=null;i.hasOwnProperty("timeoutCallback")&&(d=i.timeoutCallback),setTimeout((function(){h||(h=!0,s.queue.shift(),d&&d.call(o))}),i.timeout)}}else s.readers=-1,a.call(i.scope,c)}var r=new t,n={};this.readLock=e,this.writeLock=a,this.async={readLock:function(t,a,r){"function"!=typeof t?e(t,(function(t){a.call(this,null,t)}),r):e((function(t){a.call(this,null,t)}),r=a=t)},writeLock:function(t,e,r){"function"!=typeof t?a(t,(function(t){e.call(this,null,t)}),r):a((function(t){e.call(this,null,t)}),r=e=t)}}}},270:()=>{},114:()=>{},251:()=>{}},e={};function a(r){var n=e[r];if(void 0!==n)return n.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,a),i.exports}(()=>{"use strict";var t=a(952);!function(){let e=[],a=[],r={};var n=new t.c4(new t.De("eventsDB",!0,!1,"/"));let i,s=[{target:document,type:"click"},{target:document,type:"mousemove"}],o=document.querySelector("[data-heatmap-holder]");const c=function(t,e,a){t.addEventListener(e,(function(t){h(a(t))}),!0)},h=function(t){let a={name:t.type};a.ts=(new Date).getTime(),a.x=t.clientX,a.y=t.clientY,e.push(a)};document.querySelector("[data-tr-save]").addEventListener("click",(function(t){e.forEach((t=>{null!=t.x&&a.push({x:t.x,y:t.y,value:2})}))})),document.querySelector("[data-tr-showmap]").addEventListener("click",(function(t){o.classList.add("visible"),i=h337.create({container:o,backgroundColor:"rgba(255, 255, 255,.4)"}),i.setData({max:25,data:a})})),document.querySelector("[data-close-button]").addEventListener("click",(function(t){o.classList.remove("visible")})),document.querySelector("[data-exit-button]").addEventListener("click",(function(t){!function(){let t={pageInfo:r,eventsData:a};n.push("bla",t)}()})),s.forEach((t=>{var e,a,r;e=t.target,a=t.type,r=t=>t,"object"!=typeof e?(e=document.querySelectorAll(e)).forEach((t=>{c(t,a,r)})):c(e,a,r)})),document.addEventListener("DOMContentLoaded",(function(){r.width=window.innerWidth,r.height=window.innerHeight,r.url=window.location.pathname}))}()})()})();